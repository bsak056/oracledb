list summary backup;
list backup of archivelog all;

rman target/ log=/u02/UATDBDCDR_backup/rs_full.log << EOS
run {
set newname for tempfile 1 to '+DATAC1/UATONEDBDR/DATAFILE/%b';
set newname for database to '+DATAC1/UATONEDBDR/TEMPFILE/%b';
restore database;
switch datafile all;
switch tempfile all;
recover database until scn 13573281506623;
}
EOS

rman target/ log='/u02/UATDBDCDR_backup/bk_full.log' << EOS
run {
ALLOCATE CHANNEL c1 DEVICE TYPE DISK;
ALLOCATE CHANNEL c2 DEVICE TYPE DISK;
ALLOCATE CHANNEL c3 DEVICE TYPE DISK;
ALLOCATE CHANNEL c4 DEVICE TYPE DISK;
ALLOCATE CHANNEL c5 DEVICE TYPE DISK;
ALLOCATE CHANNEL c6 DEVICE TYPE DISK;
ALLOCATE CHANNEL c7 DEVICE TYPE DISK;
ALLOCATE CHANNEL c8 DEVICE TYPE DISK;
BACKUP CURRENT CONTROLFILE FORMAT '/u02/UATDBDCDR_backup/control-%U';
BACKUP AS COMPRESSED BACKUPSET DATABASE FORMAT '/u02/UATDBDCDR_backup/%T_%d_db' FILESPERSET 10 MAXSETSIZE 80G TAG BACKUP_FULL;
sql 'ALTER SYSTEM ARCHIVE LOG CURRENT';
BACKUP AS COMPRESSED BACKUPSET DEVICE TYPE DISK ARCHIVELOG ALL FORMAT '/u02/UATDBDCDR_backup/%T_%d_%u_%s_%U_arc' FILESPERSET 10 TAG ARCH;
}
EOS

delete noprompt expired archivelog all
